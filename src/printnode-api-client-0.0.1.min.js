var PrintNodeApi=function(){"use strict"
function t(t){var e=t.getResponseHeader("Content-Type")
return e&&"application/json"!==e.split(";")[0]?void console.error("PrintNode Api shouldn't be returning anything but JSON",t):JSON.parse(t.responseText)}function e(t){var e=t.getAllResponseHeaders(),n={}
if(!e)return n
for(var r=e.split("\r\n"),o=0,i=r.length;i>o;o++){var s=r[o],u=s.indexOf(": ")
if(u>0){var a=s.substring(0,u),p=s.substring(u+2)
n[a]=p}}return n}function n(n,r,o,i,s,p){var c,l=a(),f=0,h="https://"+n.server+"/"+o
n=u({timeoutDuration:3e3},n),n.timeoutDuration&&n.timeout&&(c=setTimeout(function(){l.onreadystatechange=function(){},l.abort(),n.timeout&&n.timeout.call(p,h,n.timeoutDuration)},n.timeoutDuration)),l.onreadystatechange=function(){if(4==l.readyState){c&&clearTimeout(c)
var r=t(l),o=e(l)
l.status<300?n.success&&n.success.call(p,r,o,l):n.error&&n.error.call(p,r,o,l),n.complete&&n.complete.apply(p,l)}else n.progress&&n.progress(++f)},l.open(r,h),l.setRequestHeader("Authorization","Basic "+btoa(s)),-1!==["POST","PUT","PATCH"].indexOf(r)&&(l.setRequestHeader("Content-Type","application/json"),i=JSON.stringify(i)),l.send(i)}function r(t){if(!t||!t.apiKey)throw"options argument expected to be a object with property 'apiKey'"
this.options=u({version:null,server:"api.printnode.com"},t)}var o=Object.prototype.hasOwnProperty,i=Array.prototype.forEach,s=function(t,e,n){if(null!==t)if(i&&t.forEach===i)t.forEach(e,n)
else if(t.length===+t.length){for(var r=0,s=t.length;s>r;r++)if(r in t&&void 0===e.call(n,t[r],r,t))return}else for(var u in t)if(o.call(t,u)&&void 0===e.call(n,t[u],u,t))return},u=function(t){return s(Array.prototype.slice.call(arguments,1),function(e){for(var n in e)void 0!==e[n]&&(t[n]=e[n])}),t},a=function(){var t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")}],e=null
return function(){if(null!==e)return e()
for(var n=0,r=t.length;r>n;n++)try{var o=t[n],i=o()
if(null!==i)return e=o,i}catch(s){continue}return function(){}}}()
return r.prototype.whoami=function(t){var e=u(t,this.options)
n(e,"GET","whoami",null,this.options.apiKey,t.context||this)},r.prototype.computers=function(t,e){var r=u(t,this.options),o="computers"
e&&e.computerSet&&(o+="/"+e.computerSet),n(r,"GET",o,null,this.options.apiKey,t.context||this)},r.prototype.printers=function(t,e){var r=u(t,this.options),o="printers"
e&&(e.computerSet&&(o="computers/"+e.computerSet+"/printers"),e.printerSet&&(o+="/"+e.printerSet)),n(r,"GET",o,null,this.options.apiKey,t.context||this)},r.prototype.printjob=function(t,e){var r=u(t,this.options)
n(r,"POST","printjobs",e,this.options.apiKey,t.context||this)},r}()